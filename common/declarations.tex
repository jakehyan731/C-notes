\section{\IFRU{Объявления в Си/Си++}{C/C++ declarations}}
\subsection{Объявления переменных внутри ф-ции}

Раньше, в Си можно было объявлять переменные только в начале ф-ции. А в Си++ --- где угодно.

К тому же, нельзя было объявлять итератор в for() (а в Си++ также можно было):

\begin{lstlisting}
for(int i=0; i<10; i++)
	...
\end{lstlisting}

Новый стандарт C99\ref{C99} позволяет делать это.

\subsubsection{static}

Обычно глобальные переменные (или ф-ции) объявляются как static, так их область видимости ограничивается 
данным файлом. Но локальные переменные внутри ф-ции также можно объявлять как static, тогда эта переменная
будет не локальной, а глобальной, но её область видимости будет ограничена только этой ф-цией.

Например:

\begin{lstlisting}
void fn(...)
{
	for(int x=0; x<100; x++)
	{
		static int times_executed = 0;
		times_executed++;
	}
};
\end{lstlisting}

К примеру, это помогло бы для реализации strtok(), ведь этой ф-ции что-то нужно хранить у себя между вызовами.

\input{common/forward_declarations} % subsection

\subsection{Определение строк}

\subsubsection{Символы используемые в строках}

\begin{center}
\begin{tabular}{ | l | l | l | }
\hline
\textbackslash{}0 & 0x00 & нулевой байт \\
\hline
\textbackslash{}t & 0x09 & табуляция \\
\hline
\textbackslash{}n & 0x0A & line feed (LF) \\
\hline
\textbackslash{}r & 0x0D & carriage return (CR) \\
\hline
\end{tabular}
\end{center}

Разница между LF и CR в том, что в старых матричных принтерах,
LF означал протягивание бумаги на одну строку вниз,
а CR перевод каретки влево до конца.
Так что в принтер нужно было передавать оба символа.

Вывод CR без LF дает возможность перезаписывать текующую строку в консоли:

\begin{lstlisting}
for (;;)
{
	// do something
	// how much we processed?
	percents=ammount_of_work/total_work*100;
	printf ("%d%% complete\r", percents);
};
\end{lstlisting}

Это часто используется например в архиваторах для отображения информации, или, например, wget.

В Си и UNIX принят LF.

В DOS и затем в Windows ~--- CR+LF.

\subsubsection{Строка определенная в нескольких строках}
\label{heredoc}
Малоизвестная возможность Си, длинные строки можно определять так:

\begin{lstlisting}
const char* long_line="line 1"
	"line 2"
	"line 3"
	"line 4"
	"line 5";

...

printf ("Some Utility v0.1\n"
	"Usage: %s parameters\n"
	"\n"
	"Authors:...\n", argv[0]);
\end{lstlisting}

Это отдаленно напоминает ``here document''\footnote{\url{https://en.wikipedia.org/wiki/Here_document}} в 
UNIX-шеллах и Perl.

